# v1

请制作一个名为“小红书Agent”的浏览器插件，可以用来在网页版的小红书里，对每一条评论，基于帖子的内容、当前的评论(以及评论的父评论的父评论的父评论等等)以及我的人设，进行对大语言模型的调用，比如ChatGPT的模型调用，来生成一个适合用于回复的评论版本。

小红书笔记的详情页的地址是这样的格式：
https://www.xiaohongshu.com/explore/68e7b9600000000005001c4e


上面的详情页在PC中打开之后会是一个浮窗的形式展示出来。浮窗的内容我拷贝出来。内容是这样子:
<浮窗内容>
<div data-v-78649b94="" id="noteContainer" class="note-container" data-type="normal" data-render-status="6" data-css-flag="0" data-video-style="default" style="width: 798px; transition: transform 0.4s, width 0.4s; transform: translate(88px, 24px) scale(1); overflow: visible;"><div data-v-78649b94="" class="author"><div data-v-701599c8="" data-v-78649b94="" class="author-wrapper"><div data-v-701599c8="" class="info"><a data-v-701599c8="" aria-current="page" href="/user/profile/672b1b2d000000001d02ea5d?channel_type=web_profile_page&amp;xsec_token=ABR3DgecR7ipxN5xwkxqE1A7hI_5lIxg7AzS-y74GPAAI%3D&amp;xsec_source=pc_note" class="active router-link-exact-active" target="_blank"><img data-v-76fb8a7f="" class="avatar-item" crossorigin="anonymous" src="https://sns-avatar-qc.xhscdn.com/avatar/1040g2jo31m4a6jup4q005ppb3cmndqitgnsc2g0?imageView2/2/w/120/format/webp|imageMogr2/strip" style="width: 40px; height: 40px;"></a><a data-v-701599c8="" aria-current="page" href="/user/profile/672b1b2d000000001d02ea5d?channel_type=web_user_page&amp;parent_page_channel_type=web_user_board&amp;xsec_token=ABR3DgecR7ipxN5xwkxqE1A7hI_5lIxg7AzS-y74GPAAI=&amp;xsec_source=pc_note" class="active router-link-exact-active name" target="_blank"><span data-v-701599c8="" class="username">AI设计师阿东</span></a></div><!----></div></div><div data-v-78649b94="" class="media-container" style="width: 438px; height: auto;"><div data-v-2ae7b646="" class="slider-container"><div data-v-2ae7b646="" data-v-567c5164-s="" class="slider-container slider-zoom-in" elementtiming="note-cover"><div data-v-2ae7b646="" data-v-567c5164-s="" id="copy-img-guide"></div><!----><div data-v-2ae7b646="" data-v-567c5164-s="" class="swiper swiper-initialized swiper-horizontal swiper-pointer-events swiper-watch-progress note-slider"><div class="swiper-wrapper" style="transition-duration: 0ms; transform: translate3d(-438px, 0px, 0px);"><div class="swiper-slide swiper-slide-duplicate swiper-slide-prev" data-swiper-slide-index="10" data-index="10" style="width: 438px;"><div data-v-730a9498="" data-v-3f26350e="" data-v-2ae7b646="" class="img-container"><img data-v-3f26350e="" data-v-730a9498-s="" src="https://sns-webpic-qc.xhscdn.com/202510092228/9a21355304a6f9ed9ceff7e531345615/spectrum/1040g0k031nb9cvhq4s505ppb3cmndqitbhhc8n0!nd_dft_wlteh_webp_3" fetchpriority="auto" crossorigin="anonymous" loading="lazy" decoding="async" data-xhs-img="" class="note-slider-img"><!----></div></div><div data-v-2ae7b646="" class="swiper-slide swiper-slide-visible swiper-slide-active" data-swiper-slide-index="0" data-index="0" style="background: url(&quot;https://sns-webpic-qc.xhscdn.com/202510092227/be80b6c87d2e50add3f34e2d99561b39/spectrum/1040g0k031nb9cvhq4s005ppb3cmndqit6mhteig!nc_n_webp_mw_1&quot;) center center / contain no-repeat; width: 438px;"><div data-v-730a9498="" data-v-3f26350e="" data-v-2ae7b646="" class="img-container"><img data-v-3f26350e="" data-v-730a9498-s="" src="https://sns-webpic-qc.xhscdn.com/202510092228/b2bd1b60958e48171a6099d2aa40c660/spectrum/1040g0k031nb9cvhq4s005ppb3cmndqit6mhteig!nd_dft_wlteh_webp_3" fetchpriority="auto" crossorigin="anonymous" loading="eager" decoding="async" data-xhs-img="" class="note-slider-img"><!----></div></div><div data-v-2ae7b646="" class="swiper-slide swiper-slide-next" data-swiper-slide-index="1" data-index="1" style="background: url(&quot;https://sns-webpic-qc.xhscdn.com/202510092227/be80b6c87d2e50add3f34e2d99561b39/spectrum/1040g0k031nb9cvhq4s005ppb3cmndqit6mhteig!nc_n_webp_mw_1&quot;) center center / contain no-repeat; width: 438px;"><div data-v-730a9498="" data-v-3f26350e="" data-v-2ae7b646="" class="img-container"><img data-v-3f26350e="" data-v-730a9498-s="" src="https://sns-webpic-qc.xhscdn.com/202510092228/43ee3a49411edd28d9238bb5bb2fc856/spectrum/1040g0k031nb9cvhq4s0g5ppb3cmndqit0hs9218!nd_dft_wlteh_webp_3" fetchpriority="auto" crossorigin="anonymous" loading="lazy" decoding="async" data-xhs-img="" class="note-slider-img"><!----></div></div><div data-v-2ae7b646="" class="swiper-slide" data-swiper-slide-index="2" data-index="2" style="width: 438px;"><div data-v-730a9498="" data-v-3f26350e="" data-v-2ae7b646="" class="img-container"><img data-v-3f26350e="" data-v-730a9498-s="" src="https://sns-webpic-qc.xhscdn.com/202510092228/85a5bbb0285764b69349876930d31cdf/spectrum/1040g0k031nb9cvhq4s105ppb3cmndqitj65b3f0!nd_dft_wlteh_webp_3" fetchpriority="auto" crossorigin="anonymous" loading="lazy" decoding="async" data-xhs-img="" class="note-slider-img"><!----></div></div><div data-v-2ae7b646="" class="swiper-slide" data-swiper-slide-index="3" data-index="3" style="width: 438px;"><div data-v-730a9498="" data-v-3f26350e="" data-v-2ae7b646="" class="img-container"><img data-v-3f26350e="" data-v-730a9498-s="" src="https://sns-webpic-qc.xhscdn.com/202510092228/36ad87c9ebf4d8e184dc6e9a2820d126/spectrum/1040g0k031nb9cvhq4s1g5ppb3cmndqit89hp8io!nd_dft_wlteh_webp_3" fetchpriority="auto" crossorigin="anonymous" loading="lazy" decoding="async" data-xhs-img="" class="note-slider-img"><!----></div></div><div data-v-2ae7b646="" class="swiper-slide" data-swiper-slide-index="4" data-index="4" style="width: 438px;"><div data-v-730a9498="" data-v-3f26350e="" data-v-2ae7b646="" class="img-container"><img data-v-3f26350e="" data-v-730a9498-s="" src="https://sns-webpic-qc.xhscdn.com/202510092228/8e2b768697d00b0e2a66f1ba69496e89/spectrum/1040g0k031nb9cvhq4s205ppb3cmndqith35a110!nd_dft_wlteh_webp_3" fetchpriority="auto" crossorigin="anonymous" loading="lazy" decoding="async" data-xhs-img="" class="note-slider-img"><!----></div></div><div data-v-2ae7b646="" class="swiper-slide" data-swiper-slide-index="5" data-index="5" style="width: 438px;"><div data-v-730a9498="" data-v-3f26350e="" data-v-2ae7b646="" class="img-container"><img data-v-3f26350e="" data-v-730a9498-s="" src="https://sns-webpic-qc.xhscdn.com/202510092228/5fa8679f83da2bef4cb5e17eecf89715/spectrum/1040g0k031nb9cvhq4s2g5ppb3cmndqit45p7gbo!nd_dft_wlteh_webp_3" fetchpriority="auto" crossorigin="anonymous" loading="lazy" decoding="async" data-xhs-img="" class="note-slider-img"><!----></div></div><div data-v-2ae7b646="" class="swiper-slide" data-swiper-slide-index="6" data-index="6" style="width: 438px;"><div data-v-730a9498="" data-v-3f26350e="" data-v-2ae7b646="" class="img-container"><img data-v-3f26350e="" data-v-730a9498-s="" src="https://sns-webpic-qc.xhscdn.com/202510092228/925a7d1ca59c658e87aeea194bd20f44/spectrum/1040g0k031nb9cvhq4s305ppb3cmndqitv48g6dg!nd_dft_wlteh_webp_3" fetchpriority="auto" crossorigin="anonymous" loading="lazy" decoding="async" data-xhs-img="" class="note-slider-img"><!----></div></div><div data-v-2ae7b646="" class="swiper-slide" data-swiper-slide-index="7" data-index="7" style="width: 438px;"><div data-v-730a9498="" data-v-3f26350e="" data-v-2ae7b646="" class="img-container"><img data-v-3f26350e="" data-v-730a9498-s="" src="https://sns-webpic-qc.xhscdn.com/202510092228/8c96116ad415596f037e39453e66e125/spectrum/1040g0k031nb9cvhq4s3g5ppb3cmndqit8mne8g8!nd_dft_wlteh_webp_3" fetchpriority="auto" crossorigin="anonymous" loading="lazy" decoding="async" data-xhs-img="" class="note-slider-img"><!----></div></div><div data-v-2ae7b646="" class="swiper-slide" data-swiper-slide-index="8" data-index="8" style="width: 438px;"><div data-v-730a9498="" data-v-3f26350e="" data-v-2ae7b646="" class="img-container"><img data-v-3f26350e="" data-v-730a9498-s="" src="https://sns-webpic-qc.xhscdn.com/202510092228/da275aeb19bb61e6f59a2249902955c8/spectrum/1040g0k031nb9cvhq4s405ppb3cmndqit092lt0g!nd_dft_wlteh_webp_3" fetchpriority="auto" crossorigin="anonymous" loading="lazy" decoding="async" data-xhs-img="" class="note-slider-img"><!----></div></div><div data-v-2ae7b646="" class="swiper-slide" data-swiper-slide-index="9" data-index="9" style="width: 438px;"><div data-v-730a9498="" data-v-3f26350e="" data-v-2ae7b646="" class="img-container"><img data-v-3f26350e="" data-v-730a9498-s="" src="https://sns-webpic-qc.xhscdn.com/202510092228/af5e5477c70b199919d79ae1523e54b4/spectrum/1040g0k031nb9cvhq4s4g5ppb3cmndqit0sf6eh8!nd_dft_wlteh_webp_3" fetchpriority="auto" crossorigin="anonymous" loading="lazy" decoding="async" data-xhs-img="" class="note-slider-img"><!----></div></div><div data-v-2ae7b646="" class="swiper-slide swiper-slide-duplicate-prev" data-swiper-slide-index="10" data-index="10" style="width: 438px;"><div data-v-730a9498="" data-v-3f26350e="" data-v-2ae7b646="" class="img-container"><img data-v-3f26350e="" data-v-730a9498-s="" src="https://sns-webpic-qc.xhscdn.com/202510092228/9a21355304a6f9ed9ceff7e531345615/spectrum/1040g0k031nb9cvhq4s505ppb3cmndqitbhhc8n0!nd_dft_wlteh_webp_3" fetchpriority="auto" crossorigin="anonymous" loading="lazy" decoding="async" data-xhs-img="" class="note-slider-img"><!----></div></div><div class="swiper-slide swiper-slide-duplicate swiper-slide-duplicate-active" data-swiper-slide-index="0" data-index="0" style="background: url(&quot;https://sns-webpic-qc.xhscdn.com/202510092227/be80b6c87d2e50add3f34e2d99561b39/spectrum/1040g0k031nb9cvhq4s005ppb3cmndqit6mhteig!nc_n_webp_mw_1&quot;) center center / contain no-repeat; width: 438px;"><div data-v-730a9498="" data-v-3f26350e="" data-v-2ae7b646="" class="img-container"><img data-v-3f26350e="" data-v-730a9498-s="" src="https://sns-webpic-qc.xhscdn.com/202510092228/b2bd1b60958e48171a6099d2aa40c660/spectrum/1040g0k031nb9cvhq4s005ppb3cmndqit6mhteig!nd_dft_wlteh_webp_3" fetchpriority="auto" crossorigin="anonymous" loading="eager" decoding="async" data-xhs-img="" class="note-slider-img"><!----></div></div></div><!----><!----><!----><!----></div><div data-v-2ae7b646="" data-v-567c5164-s="" class="fraction">1/11</div><div data-v-2ae7b646="" data-v-567c5164-s="" class="arrow-controller left forbidden"><div data-v-2ae7b646="" data-v-567c5164-s="" class="btn-wrapper"><svg data-v-55b36ac6="" data-v-2ae7b646="" data-v-567c5164-s="" class="reds-icon" width="16" height="16"><use data-v-55b36ac6="" xlink:href="#arrow_left"></use></svg></div></div><div data-v-2ae7b646="" data-v-567c5164-s="" class="arrow-controller right"><div data-v-2ae7b646="" data-v-567c5164-s="" class="btn-wrapper"><svg data-v-55b36ac6="" data-v-2ae7b646="" data-v-567c5164-s="" class="reds-icon" width="16" height="16"><use data-v-55b36ac6="" xlink:href="#arrow_left"></use></svg></div></div><div data-v-16dd1638="" data-v-2ae7b646="" data-v-567c5164-s="" class="slider-pagination-container pagination-media-container"><div data-v-16dd1638="" id="note-swipe-guide" class="pagination-list"><div data-v-16dd1638="" class="pagination-item"><div data-v-16dd1638="" class="active dot"></div></div><div data-v-16dd1638="" class="pagination-item"><div data-v-16dd1638="" class="dot"></div></div><div data-v-16dd1638="" class="pagination-item"><div data-v-16dd1638="" class="dot"></div></div><div data-v-16dd1638="" class="pagination-item"><div data-v-16dd1638="" class="dot"></div></div><div data-v-16dd1638="" class="pagination-item"><div data-v-16dd1638="" class="dot"></div></div><div data-v-16dd1638="" class="pagination-item"><div data-v-16dd1638="" class="dot"></div></div><div data-v-16dd1638="" class="pagination-item"><div data-v-16dd1638="" class="dot"></div></div><div data-v-16dd1638="" class="pagination-item"><div data-v-16dd1638="" class="dot"></div></div><div data-v-16dd1638="" class="pagination-item"><div data-v-16dd1638="" class="dot"></div></div><div data-v-16dd1638="" class="pagination-item"><div data-v-16dd1638="" class="dot"></div></div><div data-v-16dd1638="" class="pagination-item"><div data-v-16dd1638="" class="dot"></div></div></div></div></div></div><!----></div><div data-v-78649b94="" id="pagination-teleport-container" class=""><div data-v-16dd1638="" data-v-2ae7b646="" class="slider-pagination-container pagination-teleport-container"><div data-v-16dd1638="" id="note-swipe-guide" class="pagination-list"><div data-v-16dd1638="" class="pagination-item"><div data-v-16dd1638="" class="active dot"></div></div><div data-v-16dd1638="" class="pagination-item"><div data-v-16dd1638="" class="dot"></div></div><div data-v-16dd1638="" class="pagination-item"><div data-v-16dd1638="" class="dot"></div></div><div data-v-16dd1638="" class="pagination-item"><div data-v-16dd1638="" class="dot"></div></div><div data-v-16dd1638="" class="pagination-item"><div data-v-16dd1638="" class="dot"></div></div><div data-v-16dd1638="" class="pagination-item"><div data-v-16dd1638="" class="dot"></div></div><div data-v-16dd1638="" class="pagination-item"><div data-v-16dd1638="" class="dot"></div></div><div data-v-16dd1638="" class="pagination-item"><div data-v-16dd1638="" class="dot"></div></div><div data-v-16dd1638="" class="pagination-item"><div data-v-16dd1638="" class="dot"></div></div><div data-v-16dd1638="" class="pagination-item"><div data-v-16dd1638="" class="dot"></div></div><div data-v-16dd1638="" class="pagination-item"><div data-v-16dd1638="" class="dot"></div></div></div></div></div><div data-v-6f638ad4="" class="interaction-container"><div data-v-6f638ad4="" class="author-container"><div data-v-701599c8="" data-v-6f638ad4="" class="author-wrapper border"><div data-v-701599c8="" class="info"><a data-v-701599c8="" aria-current="page" href="/user/profile/672b1b2d000000001d02ea5d?channel_type=web_profile_page&amp;xsec_token=ABR3DgecR7ipxN5xwkxqE1A7hI_5lIxg7AzS-y74GPAAI%3D&amp;xsec_source=pc_note" class="active router-link-exact-active" target="_blank"><img data-v-76fb8a7f="" class="avatar-item" crossorigin="anonymous" src="https://sns-avatar-qc.xhscdn.com/avatar/1040g2jo31m4a6jup4q005ppb3cmndqitgnsc2g0?imageView2/2/w/120/format/webp|imageMogr2/strip" style="width: 40px; height: 40px;"></a><a data-v-701599c8="" aria-current="page" href="/user/profile/672b1b2d000000001d02ea5d?channel_type=web_user_page&amp;parent_page_channel_type=web_user_board&amp;xsec_token=ABR3DgecR7ipxN5xwkxqE1A7hI_5lIxg7AzS-y74GPAAI=&amp;xsec_source=pc_note" class="active router-link-exact-active name" target="_blank"><span data-v-701599c8="" class="username">AI设计师阿东</span></a></div><!----></div></div><div data-v-6f638ad4="" class="note-scroller"><div data-v-610be4fa="" data-v-6f638ad4="" class="note-content"><div data-v-610be4fa="" id="detail-title" class="title">Google Lumi 原文为主 AI 为辅的设计哲学</div><div data-v-610be4fa="" id="detail-desc" class="desc"><span data-v-610be4fa="" class="note-text"><span>不同于notebookLM 注重 AI 生成的多模态内容体验，Lumi 强调「原文优先」的设计哲学，认为与深度阅读的长文本适配度更高。
	
出发点是解决 AI 总结的三个问题
1️⃣ 过度解释
AI 喜欢用自己的话复述原文，明明一句引用就能说清楚的事，非要给你写一段。效率反而降低了。
2️⃣ 引用难追溯
AI 告诉你某个结论，但你想知道这个结论到底从论文哪里来的？很难找。如果要验证或者深入了解，你得在原文里翻半天。
3️⃣ 上下文割裂
AI 对话窗口和原文是分开的，你得在两个界面之间反复切换。看着看着就忘了刚才问的问题是关于哪部分内容的，认知负担增加。
	
三个核心设计构建「原文为主、AI 生成为辅」心智
	
1️⃣ 信息层级设计
主体内容优先，AI 摘要边缘化
	
2️⃣ 上下文锚定
句子级引用跳转与可视化高亮
	
3️⃣ 情境化问答
文本或图像选区绑定的 AI 对话机制
	
</span><img class="note-content-emoji" crossorigin="anonymous" src="https://picasso-static.xiaohongshu.com/fe-platform/b98fbe9d7371faf3ff43342f166297cf6446531d.png"><span> AI 不抢主视觉，需要时再出现。</span></span></div><div data-v-610be4fa="" class="bottom-container"><span data-v-610be4fa="" class="date" selected-disabled-search="">编辑于 2天前 北京</span><!----><span data-v-610be4fa=""><!----></span></div></div><div data-v-39ecb380="" data-v-6f638ad4="" class="divider interaction-divider"></div><div data-v-4a19279a="" data-v-6f638ad4="" class="comments-el"><div data-v-4a19279a="" class="comments-container"><div data-v-4a19279a="" class="total" selected-disabled-search=""> 共 3 条评论 </div><div data-v-4a19279a="" tag="div" name="list" class="list-container"><div data-v-4a19279a="" class="parent-comment"><div data-v-aed4aacc="" id="comment-68e5d0b200000000380250c0" class="comment-item"><!----><div data-v-aed4aacc="" class="comment-inner-container"><div data-v-aed4aacc="" class="avatar"><a data-v-aed4aacc="" href="/user/profile/591726526a6a695b183e7f71?channel_type=web_profile_page&amp;xsec_token=ABt79VTXB-ZOQ9fA54qLOgNQ-0YX5PYsY8F54wNB2cPzA%3D&amp;xsec_source=pc_comment" class="" target="_blank" id="user-hover-guide" data-user-id="591726526a6a695b183e7f71" data-xsec-token="ABt79VTXB-ZOQ9fA54qLOgNQ-0YX5PYsY8F54wNB2cPzA=" data-xsec-source="pc_comment"><img data-v-76fb8a7f="" class="avatar-item" crossorigin="anonymous" src="https://sns-avatar-qc.xhscdn.com/avatar/64d975f2fae46675d3429878.jpg?imageView2/2/w/120/format/jpg|imageMogr2/strip" id="user-hover-guide" data-user-id="591726526a6a695b183e7f71" data-xsec-token="ABt79VTXB-ZOQ9fA54qLOgNQ-0YX5PYsY8F54wNB2cPzA=" data-xsec-source="pc_comment" style="width: 40px; height: 40px;"></a></div><div data-v-aed4aacc="" class="right"><div data-v-aed4aacc="" class="author-wrapper"><div data-v-aed4aacc="" class="author"><a data-v-aed4aacc="" href="/user/profile/591726526a6a695b183e7f71?channel_type=web_user_page&amp;parent_page_channel_type=web_user_board&amp;xsec_token=ABt79VTXB-ZOQ9fA54qLOgNQ-0YX5PYsY8F54wNB2cPzA=&amp;xsec_source=pc_comment" class="name" target="_blank" data-user-id="591726526a6a695b183e7f71" data-xsec-token="ABt79VTXB-ZOQ9fA54qLOgNQ-0YX5PYsY8F54wNB2cPzA=" data-xsec-source="pc_comment" selected-disabled-search="">什什是天才阿</a><!----></div><div data-v-aed4aacc="" class="comment-menu"><div data-v-1b03e45c="" data-v-aed4aacc="" class="delete-dropdown"><svg data-v-55b36ac6="" data-v-aed4aacc="" class="reds-icon more" width="16" height="16"><use data-v-55b36ac6="" xlink:href="#more"></use></svg></div></div></div><div data-v-aed4aacc="" class="content"><!----><span data-v-aed4aacc="" class="note-text"><span>请问上线了吗</span></span></div><!----><!----><div data-v-aed4aacc="" class="info"><div data-v-aed4aacc="" class="date"><span data-v-aed4aacc="" selected-disabled-search="">昨天 10:47</span><span data-v-aed4aacc="" class="location" selected-disabled-search="">澳大利亚</span></div><div data-v-aed4aacc="" class="interactions"><div data-v-aed4aacc="" class="like"><span data-v-dc3a3972="" data-v-aed4aacc="" class="like-wrapper like-active" points="[object Object]" track-data="[object Object]"><span data-v-dc3a3972="" class="like-lottie" style="width: 16px; height: 16px;"></span><svg data-v-55b36ac6="" data-v-dc3a3972="" class="reds-icon like-icon" width="16" height="16"><use data-v-55b36ac6="" xlink:href="#like"></use></svg><span data-v-dc3a3972="" class="count" selected-disabled-search="">1</span></span></div><div data-v-aed4aacc="" class="reply icon-container"><svg data-v-55b36ac6="" data-v-aed4aacc="" class="reds-icon reply-icon" width="16" height="16"><use data-v-55b36ac6="" xlink:href="#reply"></use></svg><span data-v-aed4aacc="" class="count" selected-disabled-search="">1</span></div></div></div></div><!----></div></div><div data-v-aed4aacc="" class="reply-container"><div data-v-4a19279a="" data-v-aed4aacc-s="" tag="div" name="list" class="list-container"><div data-v-aed4aacc="" id="comment-68e5ef2e0000000039026ef9" class="comment-item comment-item-sub"><!----><div data-v-aed4aacc="" class="comment-inner-container"><div data-v-aed4aacc="" class="avatar"><a data-v-aed4aacc="" aria-current="page" href="/user/profile/672b1b2d000000001d02ea5d?channel_type=web_profile_page&amp;xsec_token=ABM9lp8qcX13J0p_PHakf75nGiGGBb3Utpxqq5mcpRZLg%3D&amp;xsec_source=pc_comment" class="active router-link-exact-active" target="_blank" id="user-hover-guide" data-user-id="672b1b2d000000001d02ea5d" data-xsec-token="ABM9lp8qcX13J0p_PHakf75nGiGGBb3Utpxqq5mcpRZLg=" data-xsec-source="pc_comment"><img data-v-76fb8a7f="" class="avatar-item" crossorigin="anonymous" src="https://sns-avatar-qc.xhscdn.com/avatar/1040g2jo31m4a6jup4q005ppb3cmndqitgnsc2g0?imageView2/2/w/120/format/jpg|imageMogr2/strip" id="user-hover-guide" data-user-id="672b1b2d000000001d02ea5d" data-xsec-token="ABM9lp8qcX13J0p_PHakf75nGiGGBb3Utpxqq5mcpRZLg=" data-xsec-source="pc_comment" style="width: 24px; height: 24px;"></a></div><div data-v-aed4aacc="" class="right"><div data-v-aed4aacc="" class="author-wrapper"><div data-v-aed4aacc="" class="author"><a data-v-aed4aacc="" aria-current="page" href="/user/profile/672b1b2d000000001d02ea5d?channel_type=web_user_page&amp;parent_page_channel_type=web_user_board&amp;xsec_token=ABM9lp8qcX13J0p_PHakf75nGiGGBb3Utpxqq5mcpRZLg=&amp;xsec_source=pc_comment" class="active router-link-exact-active name" target="_blank" data-user-id="672b1b2d000000001d02ea5d" data-xsec-token="ABM9lp8qcX13J0p_PHakf75nGiGGBb3Utpxqq5mcpRZLg=" data-xsec-source="pc_comment" selected-disabled-search="">AI设计师阿东</a><span data-v-aed4aacc="" class="tag" selected-disabled-search="">作者</span></div><div data-v-aed4aacc="" class="comment-menu comment-menu-sub"><div data-v-1b03e45c="" data-v-aed4aacc="" class="delete-dropdown"><svg data-v-55b36ac6="" data-v-aed4aacc="" class="reds-icon more" width="16" height="16"><use data-v-55b36ac6="" xlink:href="#more"></use></svg></div></div></div><div data-v-aed4aacc="" class="content"><!----><span data-v-aed4aacc="" class="note-text"><span>github 上 PAIR-code 可以搜到lumi</span></span></div><!----><!----><div data-v-aed4aacc="" class="info"><div data-v-aed4aacc="" class="date"><span data-v-aed4aacc="" selected-disabled-search="">昨天 12:57</span><span data-v-aed4aacc="" class="location" selected-disabled-search="">北京</span></div><div data-v-aed4aacc="" class="interactions"><div data-v-aed4aacc="" class="like"><span data-v-dc3a3972="" data-v-aed4aacc="" class="like-wrapper like-active" points="[object Object]" track-data="[object Object]"><span data-v-dc3a3972="" class="like-lottie" style="width: 16px; height: 16px;"></span><svg data-v-55b36ac6="" data-v-dc3a3972="" class="reds-icon like-icon" width="16" height="16"><use data-v-55b36ac6="" xlink:href="#like"></use></svg><span data-v-dc3a3972="" class="count" selected-disabled-search="">4</span></span></div><div data-v-aed4aacc="" class="reply icon-container"><svg data-v-55b36ac6="" data-v-aed4aacc="" class="reds-icon reply-icon" width="16" height="16"><use data-v-55b36ac6="" xlink:href="#reply"></use></svg><span data-v-aed4aacc="" class="count" selected-disabled-search="">回复</span></div></div></div></div><!----></div></div><!----><!----></div><!----><!----></div><!----></div><div data-v-4a19279a="" class="parent-comment"><div data-v-aed4aacc="" id="comment-68e637940000000033025a7d" class="comment-item"><!----><div data-v-aed4aacc="" class="comment-inner-container"><div data-v-aed4aacc="" class="avatar"><a data-v-aed4aacc="" href="/user/profile/61a78e97000000001000ffd1?channel_type=web_profile_page&amp;xsec_token=ABMmoCor8ZJBrwraw929HEL5TbDPiaVpYrqO_YGg_74u0%3D&amp;xsec_source=pc_comment" class="" target="_blank" id="" data-user-id="61a78e97000000001000ffd1" data-xsec-token="ABMmoCor8ZJBrwraw929HEL5TbDPiaVpYrqO_YGg_74u0=" data-xsec-source="pc_comment"><img data-v-76fb8a7f="" class="avatar-item" crossorigin="anonymous" src="https://sns-avatar-qc.xhscdn.com/avatar/61a78e97000000001000ffd1.jpg?imageView2/2/w/120/format/jpg|imageMogr2/strip" id="" data-user-id="61a78e97000000001000ffd1" data-xsec-token="ABMmoCor8ZJBrwraw929HEL5TbDPiaVpYrqO_YGg_74u0=" data-xsec-source="pc_comment" style="width: 40px; height: 40px;"></a></div><div data-v-aed4aacc="" class="right"><div data-v-aed4aacc="" class="author-wrapper"><div data-v-aed4aacc="" class="author"><a data-v-aed4aacc="" href="/user/profile/61a78e97000000001000ffd1?channel_type=web_user_page&amp;parent_page_channel_type=web_user_board&amp;xsec_token=ABMmoCor8ZJBrwraw929HEL5TbDPiaVpYrqO_YGg_74u0=&amp;xsec_source=pc_comment" class="name" target="_blank" data-user-id="61a78e97000000001000ffd1" data-xsec-token="ABMmoCor8ZJBrwraw929HEL5TbDPiaVpYrqO_YGg_74u0=" data-xsec-source="pc_comment" selected-disabled-search="">竹君</a><!----></div><div data-v-aed4aacc="" class="comment-menu"><div data-v-1b03e45c="" data-v-aed4aacc="" class="delete-dropdown"><svg data-v-55b36ac6="" data-v-aed4aacc="" class="reds-icon more" width="16" height="16"><use data-v-55b36ac6="" xlink:href="#more"></use></svg></div></div></div><div data-v-aed4aacc="" class="content"><!----><span data-v-aed4aacc="" class="note-text"><span>只能处理 arxiv 论文</span><img class="note-content-emoji" crossorigin="anonymous" src="https://picasso-static.xiaohongshu.com/fe-platform/ca75b2fc85b0a3e171fe5df1cbf90efdcd3ba571.png"></span></div><!----><!----><div data-v-aed4aacc="" class="info"><div data-v-aed4aacc="" class="date"><span data-v-aed4aacc="" selected-disabled-search="">昨天 18:06</span><span data-v-aed4aacc="" class="location" selected-disabled-search="">湖北</span></div><div data-v-aed4aacc="" class="interactions"><div data-v-aed4aacc="" class="like"><span data-v-dc3a3972="" data-v-aed4aacc="" class="like-wrapper like-active" points="[object Object]" track-data="[object Object]"><span data-v-dc3a3972="" class="like-lottie" style="width: 16px; height: 16px;"></span><svg data-v-55b36ac6="" data-v-dc3a3972="" class="reds-icon like-icon" width="16" height="16"><use data-v-55b36ac6="" xlink:href="#like"></use></svg><span data-v-dc3a3972="" class="count" selected-disabled-search="">赞</span></span></div><div data-v-aed4aacc="" class="reply icon-container"><svg data-v-55b36ac6="" data-v-aed4aacc="" class="reds-icon reply-icon" width="16" height="16"><use data-v-55b36ac6="" xlink:href="#reply"></use></svg><span data-v-aed4aacc="" class="count" selected-disabled-search="">回复</span></div></div></div></div><!----></div></div><!----><!----></div></div><!----><div data-v-4643bded="" data-v-4a19279a="" class="end-container"> - THE END - </div><!----></div></div><div data-v-b9627730="" class="tips-el" style="display: none;"><div data-v-b9627730="" class="tips"><svg data-v-55b36ac6="" data-v-b9627730="" class="reds-icon icon" width="24" height="24"><use data-v-55b36ac6="" xlink:href="#group"></use></svg><span data-v-b9627730="" class="text">去首页，发现更多笔记</span><svg data-v-55b36ac6="" data-v-b9627730="" class="reds-icon icon" width="24" height="24"><use data-v-55b36ac6="" xlink:href="#arrow_right_f"></use></svg></div></div><!----></div><div data-v-6f638ad4="" class="interactions engage-bar"><div data-v-09acb0da="" data-v-6f638ad4="" class="engage-bar-container"><div data-v-64f12a14="" class="engage-bar" style="--d6cd0722: -202.765625px;"><!----><div data-v-64f12a14="" class="input-box"><div data-v-64f12a14="" class="content-edit"><!----><p data-v-d26602f2="" id="content-textarea" contenteditable="true" data-tribute="true" class="content-input"></p><div data-v-c6e6457a="" data-v-64f12a14="" class="not-active inner-when-not-active"><div data-v-c6e6457a="" class="inner"><img data-v-c6e6457a="" crossorigin="anonymous" src="https://sns-avatar-qc.xhscdn.com/avatar/1040g2jo31m4a6jup4q005ppb3cmndqitgnsc2g0?imageView2/2/w/360/format/webp" alt="" class="icon"><span data-v-c6e6457a="">说点什么...</span></div></div><!----></div><div data-v-64f12a14="" class="interact-container"><div data-v-46299452="" data-v-6f638ad4="" data-v-64f12a14-s="" data-v-09acb0da-s="" class="buttons engage-bar-style"><div data-v-46299452="" class="left"><span data-v-dc3a3972="" data-v-46299452="" class="like-wrapper like-active" points="[object Object]" track-data="[object Object]"><span data-v-dc3a3972="" class="like-lottie" style="width: 24px; height: 24px;"></span><svg data-v-55b36ac6="" data-v-dc3a3972="" class="reds-icon like-icon" width="24" height="24"><use data-v-55b36ac6="" xlink:href="#like"></use></svg><span data-v-dc3a3972="" class="count" selected-disabled-search="">224</span></span><span data-v-0fff1a5a="" data-v-46299452="" id="note-page-collect-board-guide" class="collect-wrapper"><svg data-v-55b36ac6="" data-v-0fff1a5a="" class="reds-icon collect-icon" width="24" height="24"><use data-v-55b36ac6="" xlink:href="#collect"></use></svg><span data-v-0fff1a5a="" class="count">351</span></span><span data-v-46299452="" class="chat-wrapper"><svg data-v-55b36ac6="" data-v-46299452="" class="reds-icon" width="24" height="24"><use data-v-55b36ac6="" xlink:href="#chat"></use></svg><span data-v-46299452="" class="count">3</span></span></div><div data-v-46299452="" class="share-wrapper"><!----><div data-v-46299452="" class="share-icon-container hovered" style="width: 24px; height: 24px;"><svg data-v-55b36ac6="" data-v-46299452="" class="reds-icon share-icon" width="24" height="24"><use data-v-55b36ac6="" xlink:href="#link_c"></use></svg><svg data-v-55b36ac6="" data-v-46299452="" class="reds-icon share-icon" width="24" height="24"><use data-v-55b36ac6="" xlink:href="#share_new"></use></svg></div></div></div></div></div><div data-v-64f12a14="" class="bottom"><div data-v-64f12a14="" class="bottom-inner"><div data-v-64f12a14="" class="left-icon-area"><div data-v-64f12a14="" class="icon"><svg data-v-55b36ac6="" data-v-64f12a14="" class="reds-icon" width="24" height="24" id="showMentionEl"><use data-v-55b36ac6="" xlink:href="#mention"></use></svg></div><div data-v-64f12a14="" class="icon"><svg data-v-55b36ac6="" data-v-64f12a14="" class="reds-icon icon" width="24" height="24" id="showEmojiEl"><use data-v-55b36ac6="" xlink:href="#emoji"></use></svg></div></div><div data-v-64f12a14="" class="right-btn-area"><button data-v-64f12a14="" class="btn submit gray" disabled=""> 发送 </button><button data-v-64f12a14="" class="btn cancel"> 取消 </button></div></div></div></div></div></div><!----></div><!----></div>
</浮窗内容>


在交互上，请在每一条评论的下面的 icon 后面再增加一个 SVG 的 AI 评论含义的 icon。点击这个 icon 之后，需要基于当前笔记的内容和 ICON 所在评论的相关父级评论，拼装成一个结构化的 prompt，去调用大语言模型进行回复。注意，大语言模型要支持我在设置中任意地设定 Base URL 和 API Key。需要让大语言模型按照 JSON 的数据结构返回每次生成 3 条评论。并且要注意在设置中可以修改这个每次生成评论的数量。默认是 3 条，可以更改为 3 到 10 条。
在构造prompt 的时候，对于笔记内容的部分，我们要避免每次生成评论时都重复地对整个笔记进行内容理解，这样成本太高了。所以，需要先判断当前的笔记是否已经提前进行过内容的理解。 如果有的话，则直接使用。 如果没有的话，则读取所有图片的地址以及证文的部分。 发送给带视觉的大语言模型进行内容理解，得到完整的文字部分并且存到本地的存储当中，供后续评论生成时直接使用。
注意，生成评论的模型的 Base URL 和 API key 是可以和对笔记的图片和内容进行理解的 key 是不同的，可以各自配置。比如,对于笔记的图片和内容的理解,可以用openrouter 的qwen-vl的免费模型,而生成评论的则可以使用deepseek v3.2 的模型

在生成 N 条评论之后，这些评论需要在页面上的右侧以悬浮的形式展示，并且有一个关闭和重新生成的按钮。 在生成评论的过程中，需要有一个 loading 的点点点的动效。如果关闭了生成的评论，再次点击同一条评论时，需要直接展示上一次生成的评论，以避免重复生成造成模型的成本浪费。

整体的页面视觉设计上要符合小红书的视觉设计风格。 不要使用蓝色、紫色，也不要使用渐变色。

现在，请完成整个小红书Agent的插件开发:



---

# v2